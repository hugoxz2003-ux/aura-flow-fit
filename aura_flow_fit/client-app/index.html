<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aura Flow Fit - Socios</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#18181B">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="../images/icon-192.png">

    <!-- Shared Styles -->
    <link rel="stylesheet" href="../shared-styles.css">
    <link rel="stylesheet" href="client.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- App Container -->
    <div id="app" class="app-container">
        <!-- Top Header -->
        <header class="app-header">
            <div class="user-greeting">
                <p class="greeting">Hola, <span id="user-name">Mar√≠a</span> üëã</p>
                <h2 class="app-title">Tu Progreso</h2>
            </div>
            <div class="header-actions">
                <button class="icon-btn" id="notif-btn">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
            <!-- Summary Card -->
            <section id="home-view" class="view active">
                <div class="summary-card glass-card mb-lg">
                    <div class="card-content" id="next-booking-container">
                        <div class="next-class">
                            <p class="label">Pr√≥xima Clase</p>
                            <h3 class="value">Cargando...</h3>
                        </div>
                    </div>
                </div>

                <div id="my-bookings-section" class="mb-lg">
                    <h3 class="text-lg font-600 mb-md">Mis Reservas Activas</h3>
                    <div id="my-bookings-list" class="grid gap-sm">
                        <!-- Bookings will be rendered here -->
                        <p class="text-muted text-sm px-md">Buscando tus clases...</p>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid grid grid-cols-2 gap-md mb-lg">
                    <div class="card p-md">
                        <p class="text-muted text-xs">Asistencias</p>
                        <h4 class="text-xl">12</h4>
                        <p class="text-success text-xs">‚Üë 2 este mes</p>
                    </div>
                    <div class="card p-md">
                        <p class="text-muted text-xs">Membres√≠a</p>
                        <h4 class="text-xl">18 d√≠as</h4>
                        <p class="text-warning text-xs">Vence 05 Mar</p>
                    </div>
                </div>

                <!-- Body Metrics Summary (NEW) -->
                <div id="metrics-summary" class="mb-lg">
                    <div class="flex justify-between items-center mb-md">
                        <h3 class="text-lg font-600">Estado F√≠sico</h3>
                        <span class="text-muted text-xs">Actualizado hoy</span>
                    </div>
                    <div class="grid grid-cols-2 gap-sm">
                        <div class="metric-mini-card card p-sm flex items-center gap-md">
                            <div class="metric-icon" style="background: rgba(34, 197, 94, 0.1); color: #22C55E;">‚öñÔ∏è
                            </div>
                            <div>
                                <p class="text-muted text-xs">Peso</p>
                                <p class="text-md font-600" id="home-peso">-- kg</p>
                            </div>
                        </div>
                        <div class="metric-mini-card card p-sm flex items-center gap-md">
                            <div class="metric-icon" style="background: rgba(245, 158, 11, 0.1); color: #F59E0B;">üî•
                            </div>
                            <div>
                                <p class="text-muted text-xs">% Grasa</p>
                                <p class="text-md font-600" id="home-grasa">-- %</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity/History -->
                <section id="recent-activity">
                    <div class="section-header flex justify-between items-center mb-md">
                        <h3 class="text-lg font-600">Tu Actividad</h3>
                        <a href="#" class="text-primary text-sm">Ver historial</a>
                    </div>
                    <div class="activity-card glass-card p-md mb-lg">
                        <div class="flex items-center gap-md mb-sm">
                            <div class="status-dot success"></div>
                            <p class="text-sm">Asististe a Pilates Reformer <span class="text-muted">‚Ä¢ Ayer</span></p>
                        </div>
                        <div class="flex items-center gap-md">
                            <div class="status-dot info"></div>
                            <p class="text-sm">Nueva meta alcanzada: 12 clases <span class="text-muted">‚Ä¢ Mar</span></p>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Progress View (Metrics Detail) -->
            <section id="progress-view" class="view">
                <div class="section-header mb-md">
                    <h3 class="text-lg font-600">Antropometr√≠a y Evoluci√≥n</h3>
                    <p class="text-sm text-muted">Tus medidas registradas por el equipo Aura.</p>
                </div>

                <div class="grid gap-md mb-xl">
                    <div class="card glass-card p-lg flex justify-between items-center">
                        <div class="flex items-center gap-lg">
                            <div class="metric-icon-lg">‚öñÔ∏è</div>
                            <div>
                                <p class="text-muted text-sm">Peso Actual</p>
                                <h2 class="text-2xl font-700" id="prog-peso">-- kg</h2>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-xs text-muted">Estatura</p>
                            <p class="font-600" id="prog-estatura">-- cm</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-md">
                        <div class="card glass-card p-lg">
                            <p class="text-muted text-xs uppercase mb-sm">Masa Grasa</p>
                            <h3 class="text-2xl font-700 text-warning" id="prog-grasa">--%</h3>
                            <div class="progress-bar-sm mt-sm">
                                <div class="fill warning" style="width: 0%" id="bar-grasa"></div>
                            </div>
                        </div>
                        <div class="card glass-card p-lg">
                            <p class="text-muted text-xs uppercase mb-sm">Masa Muscular</p>
                            <h3 class="text-2xl font-700 text-success" id="prog-musculo">--%</h3>
                            <div class="progress-bar-sm mt-sm">
                                <div class="fill success" style="width: 0%" id="bar-musculo"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-header mb-md">
                    <h3 class="text-lg font-600">Planilla de Entrenamiento</h3>
                </div>
                <div class="card glass-card p-lg">
                    <div class="flex items-center gap-md mb-lg">
                        <div class="workout-icon">üèãÔ∏è</div>
                        <div>
                            <h4 class="font-600">Fuerza & Hipertrofia</h4>
                            <p class="text-xs text-muted">Nivel Intermedio ‚Ä¢ 4 d√≠as/sem</p>
                        </div>
                    </div>
                    <button class="btn btn-secondary w-full">Descargar Planilla PDF</button>
                </div>
            </section>

            <!-- Classes Booking View -->
            <section id="booking-view" class="view">
                <div class="section-header mb-md">
                    <h3 class="text-lg font-600">Agendar Clase</h3>
                </div>
                <div class="calendar-strip mb-md">
                    <!-- Day selection scrolling container -->
                    <div class="days-container flex gap-sm">
                        <div class="day-btn active"><span>Lun</span><strong>15</strong></div>
                        <div class="day-btn"><span>Mar</span><strong>16</strong></div>
                        <div class="day-btn"><span>Mie</span><strong>17</strong></div>
                        <div class="day-btn"><span>Jue</span><strong>18</strong></div>
                        <div class="day-btn"><span>Vie</span><strong>19</strong></div>
                        <div class="day-btn"><span>Sab</span><strong>20</strong></div>
                    </div>
                </div>
                <div class="available-classes grid gap-md" id="booking-classes-container">
                    <p class="text-center p-lg text-muted">Cargando clases disponibles...</p>
                </div>
            </section>
            <!-- Profile/Membership View -->
            <section id="profile-view" class="view">
                <div class="section-header mb-md">
                    <h3 class="text-lg font-600">Mi Membres√≠a</h3>
                </div>
                <div class="membership-card premium-card mb-lg overflow-hidden">
                    <div class="premium-pattern"></div>
                    <div class="p-lg relative">
                        <div class="flex justify-between items-start mb-xl">
                            <div>
                                <span class="text-xs font-700 uppercase tracking-widest opacity-70">Socio VIP</span>
                                <h2 class="text-2xl font-800 mt-xs" id="profile-plan-name">Cargando...</h2>
                            </div>
                            <div id="profile-status-badge" class="badge-premium">--</div>
                        </div>

                        <div class="grid grid-cols-2 gap-lg mb-xl">
                            <div>
                                <p class="text-xs opacity-70 uppercase font-700">Clases Mensuales</p>
                                <p class="text-lg font-600" id="profile-clases-totales">--</p>
                            </div>
                            <div>
                                <p class="text-xs opacity-70 uppercase font-700">Restantes</p>
                                <p class="text-lg font-800 text-primary-light" id="profile-clases-restantes">--</p>
                            </div>
                        </div>

                        <div class="flex justify-between items-end border-t border-white-10 pt-md">
                            <div>
                                <p class="text-xs opacity-70">Pr√≥ximo Cobro</p>
                                <p class="font-600" id="profile-vencimiento-date">--/--/--</p>
                            </div>
                            <div class="text-xs font-700">MARZO 2024</div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary w-full mb-xl" id="renew-btn">Renovar Planes</button>

                <div class="section-header mb-md">
                    <h3 class="text-lg font-600">Cuenta</h3>
                </div>
                <div class="grid gap-md">
                    <button class="btn btn-secondary w-full justify-start">Notificaciones</button>
                    <button class="btn btn-secondary w-full justify-start">M√©todo de Pago</button>
                    <button class="btn btn-error w-full mt-lg">Cerrar Sesi√≥n</button>
                </div>
            </section>

            <div class="section-header mb-md">
                <h3 class="text-lg font-600">Configuraci√≥n</h3>
            </div>
            <div class="grid gap-md">
                <button class="btn btn-secondary w-full justify-start">Notificaciones</button>
                <button class="btn btn-secondary w-full justify-start">M√©todo de Pago</button>
                <button class="btn btn-error w-full mt-lg">Cerrar Sesi√≥n</button>
            </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="app-nav">
            <a href="#home" class="nav-btn active" data-view="home-view">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                    </path>
                </svg>
                <span>Inicio</span>
            </a>
            <a href="#booking" class="nav-btn" data-view="booking-view">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                    </path>
                </svg>
                <span>Agendar</span>
            </a>
            <a href="#progress" class="nav-btn" data-view="progress-view">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                    </path>
                </svg>
                <span>Progreso</span>
            </a>
            <a href="#profile" class="nav-btn" data-view="profile-view">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                <span>Perfil</span>
            </a>
        </nav>
    </div>

    <!-- Scripts -->
    <script src="../script.js"></script>
    <!-- Supabase SDK & Config -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../supabase-config.js"></script>

    <script src="client.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js');
            });
        }
    </script>
</body>

</html>